<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Learning C# - Building a MUD Part 1 | Aiden Arnkels-Webb</title>
<meta name=keywords content="C-Sharp,Programming,Learning,Building a MUD"><meta name=description content="Headnotes First, the project link, for those of you who just want to gander at code and commit history
Second, this post uses some Mermaid JS graphs, which don&rsquo;t look great on a dark background, so I recommend switching the site to light mode by clicking the little sun next to &ldquo;Home&rdquo; in the navbar.
Introduction Last night was one of the worst night&rsquo;s sleep I&rsquo;ve had in the past few years."><meta name=author content="Aiden Arnkels-Webb"><link rel=canonical href=https://www.aidenwebb.com/posts/learning-c-sharp-building-a-mud-part-1/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://www.aidenwebb.com/images/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.aidenwebb.com/images/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.aidenwebb.com/images/favicon/favicon-32x42.png><link rel=apple-touch-icon href=https://www.aidenwebb.com/images/favicon/apple-touch-icon.png><link rel=mask-icon href=https://www.aidenwebb.com/images/favicon/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.aidenwebb.com/posts/learning-c-sharp-building-a-mud-part-1/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-HMG34V61Y8"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-HMG34V61Y8",{anonymize_ip:!1})}</script><meta property="og:title" content="Learning C# - Building a MUD Part 1"><meta property="og:description" content="Headnotes First, the project link, for those of you who just want to gander at code and commit history
Second, this post uses some Mermaid JS graphs, which don&rsquo;t look great on a dark background, so I recommend switching the site to light mode by clicking the little sun next to &ldquo;Home&rdquo; in the navbar.
Introduction Last night was one of the worst night&rsquo;s sleep I&rsquo;ve had in the past few years."><meta property="og:type" content="article"><meta property="og:url" content="https://www.aidenwebb.com/posts/learning-c-sharp-building-a-mud-part-1/"><meta property="og:image" content="https://www.aidenwebb.com/posts/learning-c-sharp-building-a-mud-part-1/%3Cimage%20path/url%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-16T10:48:32+01:00"><meta property="article:modified_time" content="2022-08-16T10:48:32+01:00"><meta property="og:site_name" content="Aiden Arnkels-Webb | Systems Architect"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.aidenwebb.com/posts/learning-c-sharp-building-a-mud-part-1/%3Cimage%20path/url%3E"><meta name=twitter:title content="Learning C# - Building a MUD Part 1"><meta name=twitter:description content="Headnotes First, the project link, for those of you who just want to gander at code and commit history
Second, this post uses some Mermaid JS graphs, which don&rsquo;t look great on a dark background, so I recommend switching the site to light mode by clicking the little sun next to &ldquo;Home&rdquo; in the navbar.
Introduction Last night was one of the worst night&rsquo;s sleep I&rsquo;ve had in the past few years."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.aidenwebb.com/posts/"},{"@type":"ListItem","position":2,"name":"Learning C# - Building a MUD Part 1","item":"https://www.aidenwebb.com/posts/learning-c-sharp-building-a-mud-part-1/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Learning C# - Building a MUD Part 1","name":"Learning C# - Building a MUD Part 1","description":"Headnotes First, the project link, for those of you who just want to gander at code and commit history\nSecond, this post uses some Mermaid JS graphs, which don\u0026rsquo;t look great on a dark background, so I recommend switching the site to light mode by clicking the little sun next to \u0026ldquo;Home\u0026rdquo; in the navbar.\nIntroduction Last night was one of the worst night\u0026rsquo;s sleep I\u0026rsquo;ve had in the past few years.","keywords":["C-Sharp","Programming","Learning","Building a MUD"],"articleBody":"Headnotes First, the project link, for those of you who just want to gander at code and commit history\nSecond, this post uses some Mermaid JS graphs, which don’t look great on a dark background, so I recommend switching the site to light mode by clicking the little sun next to “Home” in the navbar.\nIntroduction Last night was one of the worst night’s sleep I’ve had in the past few years. I’ve always had trouble with insomnia, but have built a number of techniques to work through it and eventually sleep. One of those techniques is to just get up and write down whatever comes to mind until my ADHD brain is quiet enough to sleep without sprinting through the supermarket shelves of ideation, scooping armfuls of ideas in to the shopping trolley of “Projects I should start”.\nAnd write I did! Among one of the many things that came up was “I want to learn C# / .NET Core, and I feel like I’m making reasonably good progress. I have lots of ideas for apps I want to make, but they’re primarily solving business problems and at my current skill level none of them are going to be good enough for production. What would be a good project sufficiently complicated to maintain my interest, where I can start very simple and iteratively make improvements, where any bugs in the code aren’t going to be extremely detrimental to the use of the project.\nAfter another hour staring out the window at empty street outside our flat, watching the occasional bat flit through the sky eating mosquito’s, the idea came to me. Why not make a text-based MUD?\nWhat is a MUD? MUD stands for Multi-User-Dungeon. It’s very much the grandfather of modern MMORPG’s such as Runescape and World of Warcraft. Not nearly as polished, and typically without a GUI, they’re primarily text-based, making it perfect for a simple console application without having to worry about graphics, sounds or real-time / reaction speed-based event handling.\nWhy a MUD? Well, from a design perspective, we can start with a very simple project and build a lot more complexity as we go. At the most basic level, we only need 4 components:\nThe Player / Character Rooms in a dungeon Monsters in a room Treasure dropped by monsters, or found in a room At a more complicated level, we can add:\nCharacter skills and variables, such as fighting, crafting, luck Status effects for skills, room environments, special abilities, monsters Various items equipable by the character, or monsters/npcs Different dungeons, either randomly generated or static Ways to gain or spend money found in rooms Adding a GUI / maps to rooms, allowing for 2 dimensional, or 3 dimensional rooms rather than a 1 dimensional room simply existing as a container of the things within. Adding 2d or 3d movement within a GUI map, rather than a player and monsters simply existing in a room, they could move around and between rooms. At a technical level The control plane is simple - written text-based commands sent to a console. I will need to learn about and build an interface for these text-based commands and the response, so a telnet server will likely fill this function to begin with. At a later, more complicated level, developing an own client and a GUI and encoding the control protocol might be on the cards.\nAt a motivational level It’s fun! I love RPG’s and DnD. This has the potential to just be a big mess of unbalanced ideas, but that’s OK, it’s a project for fun. If for whatever reason it does take off, I certainly won’t be complaining. As someone who used to run private game servers in my teens, I enjoy building a community of players, adapting the game to suit what players want, and knowing people are enjoying what I’ve built.\nAt a risk level If the server breaks, or data is lost, or there’s a bug that leaks information, or the systems get hacked. That really sucks, but at least no-one is relying on it. Also, no GDPR protected personal information stored means a lot less stress.\nAt an educational level There’s lots of concepts to learn at a basic level, and then deep dive in to if and when required. For example:\nClient / Server communication. Start with Telnet, maybe at a later point REST with a web-page front end, or a custom/another protocol and a dedicated game client. Authentication / Authorisation - Users are going to need to log in to play their characters at some level. Likely rolling my own to begin with (a bad idea in production, but a good learning experience). All players have the same in-game permissions, but their characters may not be able to access some items/areas without the correct stats/quests completed, which is adjacent to Authorisation. Persistent data storage - in a database or in flat files. I’m thinking a graph database is a good fit for this kind of project. A big relational databased is likely to get complicated quickly. Game/interface design - Even business applications can benefit from elements of game design. When you’re trying to drive the behaviour of a user to interact with your business application in the most productive way, understanding what draws people to take specific actions when faced with a particular scenario comes in handy. So where do we start? Designing the MVP, or more like a prototype The absolute most basic base-product. Doesn’t need reward cycles built at this point, only the basic fundamentals at this stage\nSingle player Played in the local systems console Concept:\nThe dungeon: A dungeon contains a randomly generated list of rooms. Each room contains a monster, and an exit. The monster in the room must be killed before moving to an exit. The player: The player keeps track of how many monsters have been killed The player starts in the first room of a randomly generated dungeon When the player dies, their high-score is how many monsters they have killed, and they start a new randomly generated dungeon. “That sounds boring, you don’t even have a choice as a player, it’s just kill monster, next room, kill monster, next room”\nYou’re right, we do need to make this more fun, but at this stage, we just want something that works. A prototype.\nSome idea’s I’ve had about gameplay elements to make things more fun.\nDifferent monsters. Some might be flying and out of reach of a sword, but can be shot at, some might be armoured but susceptible to magic. Some might have elemental resistances or weaknesses. Some monsters might be able to be charmed, or spoken with, or dealt with in ways other than combat. Different attack styles for both players and monsters. Players might choose to prefer melee, ranged, or magical combat. Some players might want pacifist options. Different doors leading to different rooms. Different doors indicating the type of room or monster that might be behind it. Doors covered in vines, ice or hot to touch for example, allowing a player to choose their preferred next challenge. Monsters granting XP for killing them, which can be allocated to doing more damage, or increasing your health Monsters dropping items that can be equipped for particular affects, advantages or stat changes, or otherwise used throughout the dungeon It’s still “kill monster, next room”, but now has a lot of elements of choice that allow players to develop strategy in tackling the dungeon.\n“But this isn’t even a MUD, it sounds like a roguelike single player dungeon crawl”\nYup, but it also makes the basis of a MUD to be. We add a level of abstraction and instead of “Dungeon” we have a “Map”, within the Map, we have a list of “Areas” instead of “Rooms”. “Areas” contain NPC’s, monsters, items, trees etc, and can be navigated by players.\nWe can still use randomly generated dungeons per player if we want to, and access that through an area of the overall map.\nAn admission of over-enthusiastic guilt I actually designed the MVP after I’d already got started hacking together some basic code. A result of this is that I’ve added unnecessary complexity to the project before I’ve even started. To solve this I’ll need to remove that complexity a this stage and re-implement it later. For example, I’ve already started writing a TCPServer listener, and each room actually generates random exits, and the player class has controls to allow directional movement, which won’t be useful until different exits have meaning.\nThe lesson learned? Hash out the MVP on paper before hacking around with code. It can also be a good idea to hash out your basic class diagrams too, so lets do that now.\nHashing out the building blocks - Classes Our basic 4 classes are:\nclassDiagram class Dungeon{ +List~Room~ Rooms +GenerateRooms() +DescribeDungeon() } class Room{ +int RoomID +List~Objects~ Contents +GenerateContents() +DescribeRoom() } class PlayerCharacter{ +int Health +int Level +int Position +Attack() +Defend() +Move() } class Monster{ +int Health +int Level +int Position +Attack() +Defend() } Monster and Player Character look very very similar, so lets abstract out to another class.\nclassDiagram ICharacter \u003c|.. PlayerCharacter ICharacter \u003c|.. Monster IFightable \u003c|.. PlayerCharacter IFightable \u003c|.. Monster class Dungeon{ +List~Room~ Rooms +GenerateRooms() +DescribeDungeon() } class Room{ +int RoomID +List~Objects~ Contents +GenerateContents() +DescribeRoom() } class ICharacter{ +string Name +int Position +Move() } class IFightable{ +int Health +int Level +Attack() +Defend() } class PlayerCharacter{ placeholder } class Monster{ placeholder } So, lets go back to pure basics and impliment this.\nFirst off, I’m going to move my master branch to a new branch called “firstproto”, so I can develop this design separately to the small amount of work I’ve already done. That work may be useful at a later stage, it may not be. If it’s not, I’ll delete that prototype branch.\nSecond, I’m going to remake a “main” branch and a “dev” branch, I’ll develop on the dev branch and pull in to main at key milestones. Sensible!\n1 2 git checkout -b first-prototype // create prototype branch git push origin first-prototype // push the origin to prototype branch Log in to Github, go to the repo settings \u003e branches \u003e set ‘first-prototype’ as the default branch 1 2 3 git push origin :master // delete the master branch git checkout --orphan main git checkout --orphan dev Created a Readme.MD on dev branch with a title only and saved. 1 2 3 4 5 6 7 8 9 10 11 12 13 git checkout dev git rm --cached * git status git add README.MD git commit -m \"First commit - add readme\" git add .gitignore git add .gitattributes git commit -m \"add gitattributes and .gitignore\" git push origin dev git checkout main git merge dev git push origin main git checkout dev Log in to Github, go to the repo settings \u003e branches \u003e set ‘main’ as the default branch Add files for each class/interface to be used in the program Now the git mess is cleared up, and I’ve templated the project, that’s where I’ll leave it for now. The code is empty of any domain-specific code, and does nothing, but here we have a start! - Github commit\n","wordCount":"1875","inLanguage":"en","image":"https://www.aidenwebb.com/posts/learning-c-sharp-building-a-mud-part-1/%3Cimage%20path/url%3E","datePublished":"2022-08-16T10:48:32+01:00","dateModified":"2022-08-16T10:48:32+01:00","author":{"@type":"Person","name":"Aiden Arnkels-Webb"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.aidenwebb.com/posts/learning-c-sharp-building-a-mud-part-1/"},"publisher":{"@type":"Organization","name":"Aiden Arnkels-Webb","logo":{"@type":"ImageObject","url":"https://www.aidenwebb.com/images/favicon/favicon.ico"}}}</script><script type=text/javascript>(function(e,t,n,s,o,i,a){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},i=t.createElement(s),i.async=1,i.src="https://www.clarity.ms/tag/"+o,a=t.getElementsByTagName(s)[0],a.parentNode.insertBefore(i,a)})(window,document,"clarity","script","7qoogi46vg")</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.aidenwebb.com/ accesskey=h title="Home (Alt + H)"><img src=https://www.aidenwebb.com/images/favicon/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://www.aidenwebb.com/about/ title="about me"><span>about me</span></a></li><li><a href=https://www.aidenwebb.com/posts/ title=posts><span>posts</span></a></li><li><a href=https://www.aidenwebb.com/tags/ title=tags><span>tags</span></a></li><li><a href=https://www.aidenwebb.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.aidenwebb.com/>Home</a>&nbsp;»&nbsp;<a href=https://www.aidenwebb.com/posts/>Posts</a></div><h1 class=post-title>Learning C# - Building a MUD Part 1</h1><div class=post-meta>&lt;span title='2022-08-16 10:48:32 +0100 +0100'>16 August 2022&lt;/span>&amp;nbsp;·&amp;nbsp;9 min&amp;nbsp;·&amp;nbsp;1875 words&amp;nbsp;·&amp;nbsp;Aiden Arnkels-Webb&nbsp;|&nbsp;<a href=https://github.com/Aidenwebb/aidenwebb.github.io/tree/main/blog/content/posts/2022-08-16-building-a-mud-part-1/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#headnotes>Headnotes</a></li><li><a href=#introduction>Introduction</a></li><li><a href=#what-is-a-mud>What is a MUD?</a></li><li><a href=#why-a-mud>Why a MUD?</a><ul><li><a href=#at-a-technical-level>At a technical level</a></li><li><a href=#at-a-motivational-level>At a motivational level</a></li><li><a href=#at-a-risk-level>At a risk level</a></li><li><a href=#at-an-educational-level>At an educational level</a></li></ul></li><li><a href=#so-where-do-we-start>So where do we start?</a><ul><li><a href=#designing-the-mvp-or-more-like-a-prototype>Designing the MVP, or more like a prototype</a></li><li><a href=#an-admission-of-over-enthusiastic-guilt>An admission of over-enthusiastic guilt</a></li><li><a href=#hashing-out-the-building-blocks---classes>Hashing out the building blocks - Classes</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h2 id=headnotes>Headnotes<a hidden class=anchor aria-hidden=true href=#headnotes>#</a></h2><p>First, the <a href=https://github.com/Aidenwebb/AxeheimMUD>project link</a>, for those of you who just want to gander at code and commit history</p><p>Second, this post uses some Mermaid JS graphs, which don&rsquo;t look great on a dark background, so I recommend switching the site to light mode by clicking the little sun next to &ldquo;Home&rdquo; in the navbar.</p><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>Last night was one of the worst night&rsquo;s sleep I&rsquo;ve had in the past few years. I&rsquo;ve always had trouble with insomnia, but have built a number of techniques to work through it and eventually sleep.
One of those techniques is to just get up and write down whatever comes to mind until my ADHD brain is quiet enough to sleep without sprinting through the supermarket shelves of ideation, scooping armfuls of ideas in to the shopping trolley of &ldquo;Projects I should start&rdquo;.</p><p>And write I did! Among one of the many things that came up was &ldquo;I want to learn C# / .NET Core, and I feel like I&rsquo;m making reasonably good progress. I have lots of ideas for apps I want to make, but they&rsquo;re primarily solving business problems and at my current skill level none of them are going to be good enough for production. What would be a good project sufficiently complicated to maintain my interest, where I can start very simple and iteratively make improvements, where any bugs in the code aren&rsquo;t going to be extremely detrimental to the use of the project.</p><p>After another hour staring out the window at empty street outside our flat, watching the occasional bat flit through the sky eating mosquito&rsquo;s, the idea came to me. Why not make a text-based MUD?</p><h2 id=what-is-a-mud>What is a MUD?<a hidden class=anchor aria-hidden=true href=#what-is-a-mud>#</a></h2><p>MUD stands for Multi-User-Dungeon. It&rsquo;s very much the grandfather of modern MMORPG&rsquo;s such as Runescape and World of Warcraft. Not nearly as polished, and typically without a GUI, they&rsquo;re primarily text-based, making it perfect for a simple console application without having to worry about graphics, sounds or real-time / reaction speed-based event handling.</p><h2 id=why-a-mud>Why a MUD?<a hidden class=anchor aria-hidden=true href=#why-a-mud>#</a></h2><p>Well, from a design perspective, we can start with a very simple project and build a lot more complexity as we go.
At the most basic level, we only need 4 components:</p><ul><li>The Player / Character</li><li>Rooms in a dungeon</li><li>Monsters in a room</li><li>Treasure dropped by monsters, or found in a room</li></ul><p>At a more complicated level, we can add:</p><ul><li>Character skills and variables, such as fighting, crafting, luck</li><li>Status effects for skills, room environments, special abilities, monsters</li><li>Various items equipable by the character, or monsters/npcs</li><li>Different dungeons, either randomly generated or static</li><li>Ways to gain or spend money found in rooms</li><li>Adding a GUI / maps to rooms, allowing for 2 dimensional, or 3 dimensional rooms rather than a 1 dimensional room simply existing as a container of the things within.</li><li>Adding 2d or 3d movement within a GUI map, rather than a player and monsters simply existing in a room, they could move around and between rooms.</li></ul><h3 id=at-a-technical-level>At a technical level<a hidden class=anchor aria-hidden=true href=#at-a-technical-level>#</a></h3><p>The control plane is simple - written text-based commands sent to a console. I will need to learn about and build an interface for these text-based commands and the response, so a telnet server will likely fill this function to begin with. At a later, more complicated level, developing an own client and a GUI and encoding the control protocol might be on the cards.</p><h3 id=at-a-motivational-level>At a motivational level<a hidden class=anchor aria-hidden=true href=#at-a-motivational-level>#</a></h3><p>It&rsquo;s fun! I love RPG&rsquo;s and DnD. This has the potential to just be a big mess of unbalanced ideas, but that&rsquo;s OK, it&rsquo;s a project for fun. If for whatever reason it does take off, I certainly won&rsquo;t be complaining. As someone who used to run private game servers in my teens, I enjoy building a community of players, adapting the game to suit what players want, and knowing people are enjoying what I&rsquo;ve built.</p><h3 id=at-a-risk-level>At a risk level<a hidden class=anchor aria-hidden=true href=#at-a-risk-level>#</a></h3><p>If the server breaks, or data is lost, or there&rsquo;s a bug that leaks information, or the systems get hacked. That really sucks, but at least no-one is relying on it. Also, no GDPR protected personal information stored means a lot less stress.</p><h3 id=at-an-educational-level>At an educational level<a hidden class=anchor aria-hidden=true href=#at-an-educational-level>#</a></h3><p>There&rsquo;s lots of concepts to learn at a basic level, and then deep dive in to if and when required.
For example:</p><ul><li>Client / Server communication. Start with Telnet, maybe at a later point REST with a web-page front end, or a custom/another protocol and a dedicated game client.</li><li>Authentication / Authorisation - Users are going to need to log in to play their characters at some level. Likely rolling my own to begin with (a bad idea in production, but a good learning experience). All players have the same in-game permissions, but their characters may not be able to access some items/areas without the correct stats/quests completed, which is adjacent to Authorisation.</li><li>Persistent data storage - in a database or in flat files. I&rsquo;m thinking a graph database is a good fit for this kind of project. A big relational databased is likely to get complicated quickly.</li><li>Game/interface design - Even business applications can benefit from elements of game design. When you&rsquo;re trying to drive the behaviour of a user to interact with your business application in the most productive way, understanding what draws people to take specific actions when faced with a particular scenario comes in handy.</li></ul><h2 id=so-where-do-we-start>So where do we start?<a hidden class=anchor aria-hidden=true href=#so-where-do-we-start>#</a></h2><h3 id=designing-the-mvp-or-more-like-a-prototype>Designing the MVP, or more like a prototype<a hidden class=anchor aria-hidden=true href=#designing-the-mvp-or-more-like-a-prototype>#</a></h3><p>The absolute most basic base-product. Doesn&rsquo;t need reward cycles built at this point, only the basic fundamentals at this stage</p><ul><li>Single player</li><li>Played in the local systems console</li></ul><p>Concept:</p><ul><li>The dungeon:<ul><li>A dungeon contains a randomly generated list of rooms.</li><li>Each room contains a monster, and an exit.</li><li>The monster in the room must be killed before moving to an exit.</li></ul></li><li>The player:<ul><li>The player keeps track of how many monsters have been killed</li><li>The player starts in the first room of a randomly generated dungeon</li><li>When the player dies, their high-score is how many monsters they have killed, and they start a new randomly generated dungeon.</li></ul></li></ul><p><strong>&ldquo;That sounds boring, you don&rsquo;t even have a choice as a player, it&rsquo;s just kill monster, next room, kill monster, next room&rdquo;</strong></p><p>You&rsquo;re right, we do need to make this more fun, but at this stage, we just want something that works. A prototype.</p><p>Some idea&rsquo;s I&rsquo;ve had about gameplay elements to make things more fun.</p><ul><li>Different monsters. Some might be flying and out of reach of a sword, but can be shot at, some might be armoured but susceptible to magic. Some might have elemental resistances or weaknesses. Some monsters might be able to be charmed, or spoken with, or dealt with in ways other than combat.</li><li>Different attack styles for both players and monsters. Players might choose to prefer melee, ranged, or magical combat. Some players might want pacifist options.</li><li>Different doors leading to different rooms. Different doors indicating the type of room or monster that might be behind it. Doors covered in vines, ice or hot to touch for example, allowing a player to choose their preferred next challenge.</li><li>Monsters granting XP for killing them, which can be allocated to doing more damage, or increasing your health</li><li>Monsters dropping items that can be equipped for particular affects, advantages or stat changes, or otherwise used throughout the dungeon</li></ul><p>It&rsquo;s still &ldquo;kill monster, next room&rdquo;, but now has a lot of elements of choice that allow players to develop strategy in tackling the dungeon.</p><p><strong>&ldquo;But this isn&rsquo;t even a MUD, it sounds like a roguelike single player dungeon crawl&rdquo;</strong></p><p>Yup, but it also makes the basis of a MUD to be. We add a level of abstraction and instead of &ldquo;Dungeon&rdquo; we have a &ldquo;Map&rdquo;, within the Map, we have a list of &ldquo;Areas&rdquo; instead of &ldquo;Rooms&rdquo;. &ldquo;Areas&rdquo; contain NPC&rsquo;s, monsters, items, trees etc, and can be navigated by players.</p><p>We can still use randomly generated dungeons per player if we want to, and access that through an area of the overall map.</p><h3 id=an-admission-of-over-enthusiastic-guilt>An admission of over-enthusiastic guilt<a hidden class=anchor aria-hidden=true href=#an-admission-of-over-enthusiastic-guilt>#</a></h3><p>I actually designed the MVP after I&rsquo;d already got started hacking together some basic code. A result of this is that I&rsquo;ve added unnecessary complexity to the project before I&rsquo;ve even started. To solve this I&rsquo;ll need to remove that complexity a this stage and re-implement it later. For example, I&rsquo;ve already started writing a TCPServer listener, and each room actually generates random exits, and the player class has controls to allow directional movement, which won&rsquo;t be useful until different exits have meaning.</p><p>The lesson learned? Hash out the MVP on paper before hacking around with code. It can also be a good idea to hash out your basic class diagrams too, so lets do that now.</p><h3 id=hashing-out-the-building-blocks---classes>Hashing out the building blocks - Classes<a hidden class=anchor aria-hidden=true href=#hashing-out-the-building-blocks---classes>#</a></h3><p>Our basic 4 classes are:</p><div class=mermaid>classDiagram
class Dungeon{
+List~Room~ Rooms
+GenerateRooms()
+DescribeDungeon()
}
class Room{
+int RoomID
+List~Objects~ Contents
+GenerateContents()
+DescribeRoom()
}
class PlayerCharacter{
+int Health
+int Level
+int Position
+Attack()
+Defend()
+Move()
}
class Monster{
+int Health
+int Level
+int Position
+Attack()
+Defend()
}</div><p>Monster and Player Character look very very similar, so lets abstract out to another class.</p><div class=mermaid>classDiagram
ICharacter <|.. PlayerCharacter
ICharacter <|.. Monster
IFightable <|.. PlayerCharacter
IFightable <|.. Monster
class Dungeon{
+List~Room~ Rooms
+GenerateRooms()
+DescribeDungeon()
}
class Room{
+int RoomID
+List~Objects~ Contents
+GenerateContents()
+DescribeRoom()
}
class ICharacter{
+string Name
+int Position
+Move()
}
class IFightable{
+int Health
+int Level
+Attack()
+Defend()
}
class PlayerCharacter{
placeholder
}
class Monster{
placeholder
}</div><p>So, lets go back to pure basics and impliment this.</p><p>First off, I&rsquo;m going to move my master branch to a new branch called &ldquo;firstproto&rdquo;, so I can develop this design separately to the small amount of work I&rsquo;ve already done. That work may be useful at a later stage, it may not be. If it&rsquo;s not, I&rsquo;ll delete that prototype branch.</p><p>Second, I&rsquo;m going to remake a &ldquo;main&rdquo; branch and a &ldquo;dev&rdquo; branch, I&rsquo;ll develop on the dev branch and pull in to main at key milestones. Sensible!</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git checkout -b first-prototype // create prototype branch
</span></span><span class=line><span class=cl>git push origin first-prototype // push the origin to prototype branch
</span></span></code></pre></td></tr></table></div></div><ul><li>Log in to Github, go to the repo settings > branches > set &lsquo;first-prototype&rsquo; as the default branch</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git push origin :master // delete the master branch
</span></span><span class=line><span class=cl>git checkout --orphan main
</span></span><span class=line><span class=cl>git checkout --orphan dev
</span></span></code></pre></td></tr></table></div></div><ul><li>Created a Readme.MD on dev branch with a title only and saved.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>git checkout dev
</span></span><span class=line><span class=cl>git rm --cached *
</span></span><span class=line><span class=cl>git status
</span></span><span class=line><span class=cl>git add README.MD
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;First commit - add readme&#34;</span>
</span></span><span class=line><span class=cl>git add .gitignore
</span></span><span class=line><span class=cl>git add .gitattributes
</span></span><span class=line><span class=cl>git commit -m <span class=s2>&#34;add gitattributes and .gitignore&#34;</span>
</span></span><span class=line><span class=cl>git push origin dev
</span></span><span class=line><span class=cl>git checkout main
</span></span><span class=line><span class=cl>git merge dev
</span></span><span class=line><span class=cl>git push origin main
</span></span><span class=line><span class=cl>git checkout dev
</span></span></code></pre></td></tr></table></div></div><ul><li>Log in to Github, go to the repo settings > branches > set &lsquo;main&rsquo; as the default branch</li><li>Add files for each class/interface to be used in the program</li></ul><p>Now the git mess is cleared up, and I&rsquo;ve templated the project, that&rsquo;s where I&rsquo;ll leave it for now. The code is empty of any domain-specific code, and does nothing, but here we have a start! -
<a href=https://github.com/Aidenwebb/AxeheimMUD/commit/98cc43cabea2d6cbe1cec6c98612a7bb00bdb8ce>Github commit</a></p></div><script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><script>mermaid.initialize({startOnLoad:!0})</script><footer class=post-footer><ul class=post-tags><li><a href=https://www.aidenwebb.com/tags/c-sharp/>C-Sharp</a></li><li><a href=https://www.aidenwebb.com/tags/programming/>Programming</a></li><li><a href=https://www.aidenwebb.com/tags/learning/>Learning</a></li><li><a href=https://www.aidenwebb.com/tags/building-a-mud/>Building a MUD</a></li></ul><nav class=paginav><a class=prev href=https://www.aidenwebb.com/posts/dockers-seven-network-types-and-when-to-use-them/><span class=title>« Prev</span><br><span>Dockers seven network types and when to use them</span>
</a><a class=next href=https://www.aidenwebb.com/posts/camping-packlist/><span class=title>Next »</span><br><span>Camping Packlist</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Learning C# - Building a MUD Part 1 on twitter" href="https://twitter.com/intent/tweet/?text=Learning%20C%23%20-%20Building%20a%20MUD%20Part%201&amp;url=https%3a%2f%2fwww.aidenwebb.com%2fposts%2flearning-c-sharp-building-a-mud-part-1%2f&amp;hashtags=C-Sharp%2cProgramming%2cLearning%2cBuildingaMUD"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Learning C# - Building a MUD Part 1 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.aidenwebb.com%2fposts%2flearning-c-sharp-building-a-mud-part-1%2f&amp;title=Learning%20C%23%20-%20Building%20a%20MUD%20Part%201&amp;summary=Learning%20C%23%20-%20Building%20a%20MUD%20Part%201&amp;source=https%3a%2f%2fwww.aidenwebb.com%2fposts%2flearning-c-sharp-building-a-mud-part-1%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Learning C# - Building a MUD Part 1 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.aidenwebb.com%2fposts%2flearning-c-sharp-building-a-mud-part-1%2f&title=Learning%20C%23%20-%20Building%20a%20MUD%20Part%201"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Learning C# - Building a MUD Part 1 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.aidenwebb.com%2fposts%2flearning-c-sharp-building-a-mud-part-1%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Learning C# - Building a MUD Part 1 on whatsapp" href="https://api.whatsapp.com/send?text=Learning%20C%23%20-%20Building%20a%20MUD%20Part%201%20-%20https%3a%2f%2fwww.aidenwebb.com%2fposts%2flearning-c-sharp-building-a-mud-part-1%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share Learning C# - Building a MUD Part 1 on telegram" href="https://telegram.me/share/url?text=Learning%20C%23%20-%20Building%20a%20MUD%20Part%201&amp;url=https%3a%2f%2fwww.aidenwebb.com%2fposts%2flearning-c-sharp-building-a-mud-part-1%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></div></footer><div id=disqus_thread></div><script>(function(){var e=document,t=e.createElement("script");t.src="https://aidenwebb.disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></article></main><footer class=footer><span>@ Aiden Arnkels-Webb</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>